# CleanCode 

## ch 10 클래스

코드의 표현력과 함수에 신경쓰는 것도 중요하지만, 차원 높은 코드를 얻고 싶다면 깨끗한 클래스에 집중해야 한다.



보통 클래스는 위에서 아래로 추상화 단계가 내려간다. 예를 들어서 static -> internal -> private 과 같이 말이다. 함수와 같은 경우도 마찬가지이지만 변수와의 차이점은 내부에서 사용하는 private func 같은 경우는 이를 사용하는 함수 바로 아래에 나온다는 것이다. 따라서 internal < - > private 함수가 번갈아서 나올 수 있다. 



캡슐화에 입장에서 생각해보면 사실 모든 함수를 숨길 필요는 없다. 그리고 숨기지 않을 필요도 없다. 테스트와 같은 환경에서 사용한다면 protected level( swift 에는 있나? )를 한번 고려해보자. 결국 외부로 노출되도 크게 상관은 없지만, 노출되지 않도록 모든 방법을 강구한 다음 노출시키는 것이 적절하다. 



클래스의 경우도 작은 클래스가 좋다. 다시 말해서 책임이 하나여야 한다. 이를 위해서는 이름을 지을 때부터 깊게 생각을 해봐야 한다. 애매모호한 super, manager 등이 클래스 네이밍으로 지어졌다면 많은 책임이 주어졌다는 소리이니 말이다. SRP 를 신경쓰면서 해당 클래스를 변경해야할 이유가 하나임을 만족하는 클래스를 항상 고려하도록 하자. 한가지 팁을 얻자면 해당 클래스를 변경할 이유를 역으로 생각해보자. 이유가 많다면 그 이유를 쪼개면 되는 것이다. 이런식으로 하면 더 좋은 추상화가 쉽게 떠오른다. 간혹 작은 단일클래스들이 많아진다면 해당 클래스들을 넘나드느라 구조를 파악하기 힘들다는 생각이 들 수 있다. 하지만 어쨋든 프로그램이 돌아가는데 필요한 클래스의 수는 크게 차이가 나지 않으며, 작은 서랍을 많이 두고 이를 관리할 것인가 혹은 큰 서랍 몇개만 두고 필요한 것을 찾을 것인가 로 나뉘어진다. 나라면 전자를 택할 것이다. SRP의 경우 대표적으로 개발자들이 무시하기 쉬운 원칙인데, 이에 대한 이유는 돌아가는 것과 정리하는 것을 나누어 생각했을 때 전자에만 신경쓰기 때문이다. 물론 전자가 중요한 부분이 확실하지만 그렇다고 후자가 중요하지 않은 부분은 절대 아니라는 것을 기억하자.



응집도도 잘 생각해야 한다. 일단 하나의 클래스에서 인스턴스 변수가 많아지는 것은 좋은 방식이 아니다. 또한 몇개의 함수에서 사용하는 변수가 많아진다면 이는 클래스를 쪼개야 함을 의미한다. 쪼개면서 길이가 늘어나도 상관은 없다. 중요한 사실은 쪼갤수록 재사용성과 확장성이 늘어난다는 사실이다. 이는 결국 변경을 하더라도 다른 클래스에는 신경을 쓰지 않고 원하는 기능만 쉽게 변경할 수 있도록 도와준다.



그리고 concrete, abstract를 생각해보자. 상세한 클래스에 의존하게 된다면 클라이언트 클래스는 변경에 따른 위험에 노출될 수 밖에 없으며, 테스트 또한 힘들어진다. 이때 필요한 것이 abstract이며, 만약 API를 테스트 한다고 했을 때에도 abstract의 구현체를 변경해 원하는 moc data 를 처리하여 테스트를 한다면 훨씬 용이해질 것이다.